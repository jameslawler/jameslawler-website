<?xml version="1.0" encoding="UTF-8"?><rss xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:content="http://purl.org/rss/1.0/modules/content/" xmlns:atom="http://www.w3.org/2005/Atom" version="2.0" xmlns:media="http://search.yahoo.com/mrss/"><channel><title><![CDATA[James Lawler]]></title><description><![CDATA[Development Notes]]></description><link>https://www.jameslawler.com/</link><image><url>https://www.jameslawler.com/favicon.png</url><title>James Lawler</title><link>https://www.jameslawler.com/</link></image><generator>Ghost 4.32</generator><lastBuildDate>Mon, 10 Jan 2022 20:14:52 GMT</lastBuildDate><atom:link href="https://www.jameslawler.com/rss/" rel="self" type="application/rss+xml"/><ttl>60</ttl><item><title><![CDATA[Private Repository to Build and Deploy Ghost Blog]]></title><description><![CDATA[<p>This is a follow up from a previous post about setting up a <a href="https://www.jameslawler.com/blog/2021/11/27/ghost-blog-on-github-pages/">Ghost Blog on GitHub pages using GitHub Actions</a>. In that post I described using a public GitHub repository to host both the Ghost content folder and the generated static website. In this post I will show how</p>]]></description><link>https://www.jameslawler.com/blog/2021/12/11/private-repository-to-build-and-deploy-ghost-blog/</link><guid isPermaLink="false">61b525c544d8750001f23453</guid><dc:creator><![CDATA[James Lawler]]></dc:creator><pubDate>Sat, 11 Dec 2021 22:27:21 GMT</pubDate><content:encoded><![CDATA[<p>This is a follow up from a previous post about setting up a <a href="https://www.jameslawler.com/blog/2021/11/27/ghost-blog-on-github-pages/">Ghost Blog on GitHub pages using GitHub Actions</a>. In that post I described using a public GitHub repository to host both the Ghost content folder and the generated static website. In this post I will show how to keep the Ghost content folder in a private repository and only host the generated static website in a public repository.</p><h3 id="what-you-need">What you need</h3><!--kg-card-begin: markdown--><ol>
<li>A public repository in GitHub that will hold the generated static website</li>
<li>A private repository in GitHub that will hold your content folder and GitHub workflow</li>
</ol>
<!--kg-card-end: markdown--><h3 id="public-repository">Public Repository</h3><p>Simply create a new repository in GitHub. You don&apos;t need to commit or push anything to it. This will happen automatically. The only thing you need to do is go to the repository settings and enable GitHub Pages on the <code>gh-pages</code> branch.</p><h3 id="private-repository">Private Repository</h3><p>Create a private repository in GitHub and setup your Ghost blog by following the guide from <a href="https://www.jameslawler.com/blog/2021/11/27/ghost-blog-on-github-pages/">my previous post</a>. The different is in the GitHub workflow file. Here you need to configure the <code>Deploy to GitHub Pages</code> step to deploy to a different repository within your account.</p><pre><code class="language-yaml">- name: Deploy to GitHub Pages
    uses: JamesIves/github-pages-deploy-action@4.1.7
    with:
      branch: gh-pages
      folder: static
      token: ${{ secrets.repository_token }}
      repository-name: jameslawler/jameslawler-website</code></pre><p>By default, your GitHub workflow won&apos;t have permission to manipulate another repository. In order to do this, you need to <a href="https://docs.github.com/en/authentication/keeping-your-account-and-data-secure/creating-a-personal-access-token">create a Personal Access Token</a>. The token should have at least the <code>public_repo</code> permission.</p><p>Once you have the token you need to make it available to your GitHub workflow. Since this repository is private, you could just put it straight in the source code. But for better security practices, I would use a <code>secret</code> which can be <a href="https://docs.github.com/en/actions/security-guides/encrypted-secrets#creating-encrypted-secrets-for-a-repository">configured at the repository</a> and then is passed to the <a href="https://docs.github.com/en/actions/security-guides/encrypted-secrets#using-encrypted-secrets-in-a-workflow">GitHub workflow inside a secret context</a>.</p><h3 id="testing-it-out">Testing it out</h3><p>Once you have the public and private repositories setup, and you have the GitHub workflow modifications to connect the two repositories together, it is time to test it out. Trigger the GitHub workflow on the private repository. This will build the Ghost static site, and then push it to the <code>gh-pages</code> branch of the public repository. Within a few minutes, the blog will be available on your GitHub pages url.</p><p></p>]]></content:encoded></item><item><title><![CDATA[Scheduled Posts with Ghost and GitHub Actions]]></title><description><![CDATA[<p>Todo</p>]]></description><link>https://www.jameslawler.com/blog/2021/12/11/scheduled-posts-with-ghost-and-github-actions/</link><guid isPermaLink="false">61b524ce44d8750001f23448</guid><category><![CDATA[Ghost]]></category><category><![CDATA[GitHub Actions]]></category><category><![CDATA[GitHub Pages]]></category><dc:creator><![CDATA[James Lawler]]></dc:creator><pubDate>Sat, 11 Dec 2021 22:23:20 GMT</pubDate><content:encoded><![CDATA[<p>Todo</p>]]></content:encoded></item><item><title><![CDATA[Custom Domain for Static Ghost Blog]]></title><description><![CDATA[<p>two</p>]]></description><link>https://www.jameslawler.com/blog/2021/11/28/second-post/</link><guid isPermaLink="false">61a3a66a5157d70001c0f8e4</guid><category><![CDATA[Ghost]]></category><category><![CDATA[GitHub Pages]]></category><dc:creator><![CDATA[James Lawler]]></dc:creator><pubDate>Sun, 28 Nov 2021 15:55:27 GMT</pubDate><content:encoded><![CDATA[<p>two</p>]]></content:encoded></item><item><title><![CDATA[Ghost Blog on GitHub Pages using GitHub Actions]]></title><description><![CDATA[<!--kg-card-begin: markdown--><p><img src="https://img.shields.io/badge/Platform-Ghost-informational?style=flat&amp;logo=ghost&amp;logoColor=white&amp;color=2bbc8a" alt="badge" loading="lazy"> <img src="https://img.shields.io/badge/Platform-GitHub_Pages-informational?style=flat&amp;logo=githubpages&amp;logoColor=white&amp;color=2bbc8a" alt="badge" loading="lazy"> <img src="https://img.shields.io/badge/CI/CD-GitHub_Actions-informational?style=flat&amp;logo=githubactions&amp;logoColor=white&amp;color=2bbc8a" alt="badge" loading="lazy"> <img src="https://img.shields.io/badge/Platform-Docker-informational?style=flat&amp;logo=docker&amp;logoColor=white&amp;color=2bbc8a" alt="badge" loading="lazy"></p>
<!--kg-card-end: markdown--><p>In this post I will share how I built up this website for free using Ghost CMS, GitHub Pages, and GitHub Actions.</p><h3 id="ghost">Ghost</h3><p><a href="https://ghost.org/">Ghost</a> is a content management system for self publishing your own website - and it can be self hosted in a Docker container. To start this project</p>]]></description><link>https://www.jameslawler.com/blog/2021/11/27/ghost-blog-on-github-pages/</link><guid isPermaLink="false">61a2b6e35cc67d0001e893a0</guid><category><![CDATA[Ghost]]></category><category><![CDATA[GitHub Actions]]></category><category><![CDATA[GitHub Pages]]></category><category><![CDATA[Docker]]></category><dc:creator><![CDATA[James Lawler]]></dc:creator><pubDate>Sat, 27 Nov 2021 22:53:26 GMT</pubDate><content:encoded><![CDATA[<!--kg-card-begin: markdown--><p><img src="https://img.shields.io/badge/Platform-Ghost-informational?style=flat&amp;logo=ghost&amp;logoColor=white&amp;color=2bbc8a" alt="badge" loading="lazy"> <img src="https://img.shields.io/badge/Platform-GitHub_Pages-informational?style=flat&amp;logo=githubpages&amp;logoColor=white&amp;color=2bbc8a" alt="badge" loading="lazy"> <img src="https://img.shields.io/badge/CI/CD-GitHub_Actions-informational?style=flat&amp;logo=githubactions&amp;logoColor=white&amp;color=2bbc8a" alt="badge" loading="lazy"> <img src="https://img.shields.io/badge/Platform-Docker-informational?style=flat&amp;logo=docker&amp;logoColor=white&amp;color=2bbc8a" alt="badge" loading="lazy"></p>
<!--kg-card-end: markdown--><p>In this post I will share how I built up this website for free using Ghost CMS, GitHub Pages, and GitHub Actions.</p><h3 id="ghost">Ghost</h3><p><a href="https://ghost.org/">Ghost</a> is a content management system for self publishing your own website - and it can be self hosted in a Docker container. To start this project you need to be running the Ghost Docker container on your development computer. This means you need to have Docker installed locally - and there is a <a href="https://docs.docker.com/get-docker/">handy guide</a> on the Docker website for the main operating systems.</p><p>Before starting up the Ghost Docker container you will need a directory where you can store the Ghost content (static assets, SQL database, etc). As part of this project I setup a <a href="https://github.com/jameslawler/jameslawler-website">new repository</a> in GitHub to store the content so it would stay under version control.</p><p>To start the Ghost Docker container on your local machine, open a console and navigate to the directory you have setup with a GitHub repository and execute the following command.</p><blockquote><code>docker run -d -p 2368:2368 -v content:/var/lib/ghost/content ghost:alpine</code></blockquote><p>This command will run up the latest version of Ghost using the <a href="https://hub.docker.com/_/ghost">alpine Docker image</a>. It will run on the standard <code>2368</code> port and mount the current <code>content</code>directory into the Docker container at <code>/var/lib/ghost/content</code>. This means that any changes to the Ghost instance (new posts, theme, etc) will be exposed to the current working folder and can be committed to GitHub.</p><p>After running the command, you should be able to access the locally running version of Ghost at <a href="https://www.jameslawler.com/">https://www.jameslawler.com/</a>. At first you will need to setup an account, and then you will be able to add new pages, posts, and change the navigation settings etc. You will also be able to configure the theme for your website.</p><h3 id="github-workflow">GitHub Workflow</h3><p>Once there is a locally running instance of Ghost, the next step is to get it running in GitHub Pages. The key to do this is using GitHub Actions with the help of a GitHub workflow. To setup a GitHub workflow you need to add a <code>.github\workflows</code> folder. Each GitHub workflow is just a <code>yaml</code> file within this directory.</p><pre><code class="language-yaml">name: Deploy Ghost and Generate Static Site

on:
  push:
    branches: [main]

jobs:
  build:
    runs-on: ubuntu-latest
    steps:
      - name: Check out Model Repository
        uses: actions/checkout@v2
      - name: Run Ghost
        run: docker run -d -p 2368:2368 -v ${{ github.workspace }}/content:/var/lib/ghost/content ghost:alpine
      - name: Sleep for 10 seconds
        uses: jakejarvis/wait-action@master
        with:
          time: &quot;10s&quot;
      - name: Install @jameslawler/ghost-static-site-generator
        run: npm install -g @jameslawler/ghost-static-site-generator
      - name: Generate Static Site
        run: gssg --url https://www.jameslawler.com
      - name: Deploy to Github Pages
        uses: JamesIves/github-pages-deploy-action@4.1.7
        with:
          branch: gh-pages
          folder: static
</code></pre><p>In the first section, the trigger is configured. This means that this GitHub workflow will run when a commit is made on the <code>main</code> branch.</p><pre><code class="language-yml">on:
  push:
    branches: [main]</code></pre><p>The scripts section defines the different scripts that will run one after the other during the GitHub workflow. The first simply checks out the latest version of the code to the build instance.</p><pre><code class="language-yml">jobs:
  build:
    runs-on: ubuntu-latest
    steps:
      - name: Check out Model Repository
        uses: actions/checkout@v2</code></pre><p>The next script is similar to the command we use to run Ghost locally. This will actually run up the instance of Ghost on the GitHub Actions build virtual machine. The main difference here is the use of the build parameter <code>${{ github.workspace }}</code> to access the path to the working directory of the build folder.</p><pre><code class="language-yml">- name: Run Ghost
        run: docker run -d -p 2368:2368 -v ${{ github.workspace }}/content:/var/lib/ghost/content ghost:alpine</code></pre><p>As Ghost can take a few seconds to start up, a wait script is added to pause the process for 10 seconds.</p><pre><code class="language-yml">- name: Sleep for 10 seconds
    uses: jakejarvis/wait-action@master
    with:
      time: &quot;10s&quot;</code></pre><p>Once enough time has passed, the next script installs globally a npm script that can crawl the Ghost instance and generate a static version of the website.</p><blockquote>Currently this script uses a forked version that I created with a bug fix. There is a <a href="https://github.com/Fried-Chicken/ghost-static-site-generator/pull/52">pull request</a> open on the main repository but it has not yet been merged and released to npm yet.</blockquote><pre><code class="language-yml">- name: Install @jameslawler/ghost-static-site-generator
    run: npm install -g @jameslawler/ghost-static-site-generator</code></pre><p>The next script will run this tool to do the crawl and generate a static version of the website into a folder called <code>static</code>.</p><pre><code class="language-yml">- name: Generate Static Site
    run: gssg --url https://www.jameslawler.com</code></pre><p>Finally the last script will deploy the <code>static</code> folder which contains our website to the <code>gh-pages</code> branch of the repository so that it is available on GitHub Pages.</p><h3 id="github-pages">GitHub Pages</h3><p>The last stage of this project is to enable GitHub Pages on your repository. </p>]]></content:encoded></item></channel></rss>